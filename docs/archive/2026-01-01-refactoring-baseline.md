# リファクタリング ベースラインレポート

> **取得日時**: 2026-01-01 11:22 JST  
> **目的**: リファクタリング前後での結果整合性確認用ベースライン

---

## 1. テスト結果サマリー

| テストスイート       | 結果               | 詳細                 |
| -------------------- | ------------------ | -------------------- |
| `self_diagnostic.py` | ✅ **17/17 パス**   | 全スモークテスト成功 |
| pytest (全テスト)    | ⚠️ **177/179 パス** | 2失敗、12スキップ    |

---

## 2. 既存の失敗テスト（リファクタリング前から存在）

以下の2件はリファクタリング前から失敗しているため、リファクタリング起因ではない：

| テスト                                          | エラー         | 原因                   |
| ----------------------------------------------- | -------------- | ---------------------- |
| `test_result_writer.py::test_column_reordering` | AssertionError | カラム順序の期待値相違 |
| `test_result_writer.py::test_save_csv`          | KeyError       | カラム名期待値相違     |

> [!NOTE]
> これらは `result_writer.py` のリファクタリング（Phase 1.2）で統合・修正予定

---

## 3. スキップされたテスト (12件)

インテグレーションテスト（`@pytest.mark.integration`）がスキップされている。本番影響なし。

---

## 4. ベースライン検証コマンド

リファクタリング後に以下を再実行し、結果を比較すること：

```bash
# 1. スモークテスト
source venv/bin/activate && python self_diagnostic.py

# 2. ユニットテスト
source venv/bin/activate && python -m pytest tests/ --ignore=tests/archive -q --tb=no

# 期待結果:
# - self_diagnostic.py: 17/17 パス
# - pytest: 177+ パス (既存失敗2件は解消予定)
```

---

## 5. 判定基準

| 項目     | 基準                                                           |
| -------- | -------------------------------------------------------------- |
| ✅ 成功   | self_diagnostic 17/17、pytest 既存失敗以外にリグレッションなし |
| ⚠️ 要確認 | 新規失敗テストが発生                                           |
| ❌ NG     | スモークテスト失敗 or 5件以上の新規リグレッション              |
