# カバレッジテスト実施マニュアル

## 概要
本プロジェクトでは、コードの品質と堅牢性を維持するために `pytest-cov` を用いたカバレッジテストを導入しています。
プログラムの改変を行った際は、必ず本手順に従ってカバレッジを計測し、テスト漏れがないか確認してください。

## 前提条件
* 親ディレクトリに `venv` (`../venv`) が作成済みであること。
* 必要なライブラリ (`pytest`, `pytest-cov`) がインストールされていること (自動セットアップ済み)。

## 実行手順

プロジェクトのルートディレクトリで以下のコマンドを実行してください。

```bash
./tools/run_coverage.sh
```

## 出力の見方

### 1. ターミナル出力
コマンド実行後、ターミナルに以下のようなサマリーが表示されます。

```text
Name                       Stmts   Miss  Cover
----------------------------------------------
src/analyzer.py              150     10    93%
src/calc.py                   50      0   100%
collector.py                  80      5    94%
----------------------------------------------
TOTAL                        280     15    95%
```

* **Stmts**: ステートメント（命令）の総数
* **Miss**: 実行されなかったステートメント数
* **Cover**: カバレッジ率 (%)

### 2. HTML詳細レポート
より詳細な分析（行ごとの実行有無）を確認するには、生成されたHTMLレポートを開いてください。

* **保存場所**: `htmlcov/index.html`
* **確認方法**: ブラウザで上記ファイルを開くか、VS Codeの「Live Server」等で確認します。

## 運用ルール (GEMINI.mdより抜粋)

1. **テストの実装**: 新規機能やロジック変更に対して、十分なカバレッジを持つテストケースを作成・更新すること。
2. **低下の防止**: 原則として、既存のカバレッジ率を低下させないように努めること。
